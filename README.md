# java-shareit
–°–µ—Ä–≤–∏—Å –¥–ª—è —à–µ—Ä–∏–Ω–≥–∞ –≤–µ—â–µ–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ–∏—Å–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#%EF%B8%8F-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–§—É–Ω–∫—Ü–∏–∏](#-—Ñ—É–Ω–∫—Ü–∏–∏)
- [REST API](#%EF%B8%8F-rest-api)
- [–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö](#-–º–æ–¥–µ–ª–∏-–¥–∞–Ω–Ω—ã—Ö)
- [–í–∞–ª–∏–¥–∞—Ü–∏—è](#-–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- [–ó–∞–ø—É—Å–∫](#-–∑–∞–ø—É—Å–∫)
- [–°—Ö–µ–º–∞ –ë–î](#-—Å—Ö–µ–º–∞-–±–¥)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Java 11
- Spring Boot
- PostgreSQL
- Hibernate
- Maven
- Docker
- REST API

## üéØ –§—É–Ω–∫—Ü–∏–∏
### –í–µ—â–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/–ø–æ–∏—Å–∫ –≤–µ—â–µ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –≤–µ—â–µ–π –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é

### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (WAITING ‚Üí APPROVED/REJECTED)
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

### –ó–∞–ø—Ä–æ—Å—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤–µ—â—å
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∏ —á—É–∂–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ—â–µ–π –≤ –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –≤–µ—â–∞–º –ø–æ—Å–ª–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (gateway + server)

## üõ†Ô∏è REST API
### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                | –î–µ–π—Å—Ç–≤–∏–µ                     |
|-------|---------------------|------------------------------|
| POST  | `/users`            | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è         |
| PATCH | `/users/{userId}`   | –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è        |
| GET   | `/users/{userId}`   | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID  |

### –í–µ—â–∏
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                          | –î–µ–π—Å—Ç–≤–∏–µ                     |
|-------|-------------------------------|------------------------------|
| POST  | `/items`                      | –î–æ–±–∞–≤–∏—Ç—å –≤–µ—â—å                |
| PATCH | `/items/{itemId}`             | –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—â—å                |
| GET   | `/items/{itemId}`             | –ü–æ–ª—É—á–∏—Ç—å –≤–µ—â—å –ø–æ ID          |
| GET   | `/items`                      | –í–µ—â–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è   |
| GET   | `/items/search?text={query}`  | –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–µ—â–µ–π        |

### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                                      | –î–µ–π—Å—Ç–≤–∏–µ                     |
|-------|-------------------------------------------|------------------------------|
| POST  | `/bookings`                               | –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ         |
| PATCH | `/bookings/{bookingId}?approved={bool}`  | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å         |
| GET   | `/bookings/{bookingId}`                  | –ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ ID  |
| GET   | `/bookings?state={state}`                | –°–ø–∏—Å–æ–∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π           |
| GET   | `/bookings/owner?state={state}`          | –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞        |

### –ó–∞–ø—Ä–æ—Å—ã
| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                          | –î–µ–π—Å—Ç–≤–∏–µ                     |
|-------|-------------------------------|------------------------------|
| POST  | `/requests`                   | –°–æ–∑–¥–∞—Ç—å –∑–∞–ø—Ä–æ—Å               |
| GET   | `/requests`                   | –ú–æ–∏ –∑–∞–ø—Ä–æ—Å—ã —Å –æ—Ç–≤–µ—Ç–∞–º–∏       |
| GET   | `/requests/all?from&size`     | –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π     |
| GET   | `/requests/{requestId}`       | –ó–∞–ø—Ä–æ—Å –ø–æ ID                |

## üóÉÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö 
### –ö–ª–∞—Å—Å `User`
```java
public class User {
    private long id;
    private String name;
    private String email;
}
```

### –ö–ª–∞—Å—Å `Item`
```java
public class Item {
    private Long id;
    private String name;
    private String description;
    private Boolean available;
    private User owner;
    private ItemRequest request;
}
```

### –ö–ª–∞—Å—Å `Booking`
```java
public class Booking {
    private Long id;
    private LocalDateTime start;
    private LocalDateTime end;
    private Item item;
    private User booker;
    private BookingStatus status;
}
```

### –ö–ª–∞—Å—Å `ItemRequest`
```java
public class ItemRequest {
    private Long id;
    private String description;
    private User requester;
    private LocalDateTime created;
}
```

## üîç –í–∞–ª–∏–¥–∞—Ü–∏—è
  - –í–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –≤–µ—â–∏
  - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–µ—â–µ–π —Å available=true
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä—ã
  - –î–∞—Ç—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: start < end –∏ –Ω–µ –≤ –ø—Ä–æ—à–ª–æ–º
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—è: from ‚â• 0, size ‚â• 1

## üöÄ –ó–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker
- Docker Compose
- Maven

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/JulUvarova/java-shareit.git
```

2. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:

```bash
mvn clean package
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:

```bash
docker-compose up
```

–°–µ—Ä–≤–∏—Å—ã:
  - Gateway: http://localhost:8080
  - Server: http://localhost:9090

Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
  - shareit-gateway: –ü–æ—Ä—Ç 8080
  - shareit-server: –ü–æ—Ä—Ç 9090
  - PostgreSQL: –ü–æ—Ä—Ç 5432
   

## üìä –°—Ö–µ–º–∞ –ë–î
DB Schema

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
  - users - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  - items - –≤–µ—â–∏
  - bookings - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  - requests - –∑–∞–ø—Ä–æ—Å—ã
  - comments - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

DDL-—Å–∫—Ä–∏–ø—Ç—ã: src/main/resources/schema.sql

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –î–≤—É—Ö–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Gateway + Server)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ Gateway
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: WAITING, APPROVED, REJECTED, PAST, FUTURE
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å HTTP-—Å—Ç–∞—Ç—É—Å–∞–º–∏:
    - 404 NOT FOUND - –æ–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
    - 400 BAD REQUEST - –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    - 409 CONFLICT - –∫–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö
    - 500 INTERNAL SERVER ERROR - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞
